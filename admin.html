<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>User Management</title>
  <style>
    /* ==============================
       General Body Styles
    ============================== */
    body {
      direction: rtl; /* Right-to-left text direction */
      font-family: shabnam;
      background: #f9f9f9;
      padding: 40px;
    }

    h1 {
      color: #333;
      text-align: center;
    }

    /* ==============================
       Table Styles
    ============================== */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #eee;
    }

    /* ==============================
       Button Styles
    ============================== */
    .btn {
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-danger {
      background-color: #ff4d4d; /* Red delete button */
      color: white;
    }

    .btn-toggle {
      background-color: #007bff; /* Blue toggle button */
      color: white;
    }

    /* ==============================
       Empty State Message
    ============================== */
    .empty {
      text-align: center;
      margin-top: 40px;
      color: #777;
    }
  </style>
</head>
<body>

  <!-- ==============================
       Page Title
  ============================== -->
  <h1>Registered Users List</h1>

  <!-- ==============================
       Users Table
  ============================== -->
  <table id="userTable">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Phone Number</th>
        <th>Email</th>
        <th>Password</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Users will be dynamically loaded here -->
    </tbody>
  </table>

  <!-- ==============================
       Empty Users Message
  ============================== -->
  <div class="empty" id="noUsers" style="display:none;">
    No users have been registered.
  </div>

  <!-- ==============================
       JavaScript for User Management
  ============================== -->
  <script>
    // Load users from localStorage or initialize empty array
    let users = JSON.parse(localStorage.getItem("users")) || [];
    const tableBody = document.querySelector("#userTable tbody");
    const noUsers = document.getElementById("noUsers");

    /**
     * Render the list of users in the table
     */
    function renderUsers() {
      tableBody.innerHTML = ""; // Clear table rows

      if (users.length === 0) {
        // Show empty message if no users
        document.getElementById("userTable").style.display = "none";
        noUsers.style.display = "block";
        return;
      }

      document.getElementById("userTable").style.display = "table";
      noUsers.style.display = "none";

      // Loop through users and create table rows
      users.forEach((user, index) => {
        const row = document.createElement("tr");

        row.innerHTML = `
          <td>${user.fullName}</td>
          <td>${user.phone}</td>
          <td>${user.email}</td>
          <td>
            <span class="password" id="pass-${index}">••••••</span>
            <button class="btn btn-toggle" onclick="togglePassword(${index})">Show</button>
          </td>
          <td>
            <button class="btn btn-danger" onclick="deleteUser(${index})">Delete</button>
          </td>
        `;

        tableBody.appendChild(row);
      });
    }

    /**
     * Toggle password visibility for a user
     * @param {number} index - Index of the user in the array
     */
    function togglePassword(index) {
      const span = document.getElementById(`pass-${index}`);
      const user = users[index];

      if (span.innerText === "••••••") {
        span.innerText = user.password; // Show password
      } else {
        span.innerText = "••••••"; // Hide password
      }
    }

    /**
     * Delete a user from the list
     * @param {number} index - Index of the user to delete
     */
    function deleteUser(index) {
      if (confirm("Are you sure you want to delete this user?")) {
        users.splice(index, 1);
        localStorage.setItem("users", JSON.stringify(users));
        renderUsers(); // Re-render table
      }
    }

    // Initial render on page load
    renderUsers();
  </script>

</body>
</html>
